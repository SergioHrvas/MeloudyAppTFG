// This is a basic Flutter widget test.
//
// To perform an interaction with a widget in your test, use the WidgetTester
// utility in the flutter_test package. For example, you can send tap and scroll
// gestures. You can also use WidgetTester to find child widgets in the widget
// tree, read text, and verify that the values of widget properties are correct.

import 'dart:convert';
import 'dart:io';

import 'package:flutter/material.dart';
import 'package:flutter_test/flutter_test.dart';
import 'package:meloudy_app/ips.dart';

import 'package:meloudy_app/main.dart';
import 'package:meloudy_app/modo.dart';
import 'package:meloudy_app/providers/lecciones.dart';
import 'package:meloudy_app/screen/lecciones_pantalla.dart';
import 'package:network_image_mock/network_image_mock.dart';
import 'package:nock/nock.dart';
import 'package:provider/provider.dart';
import 'package:http/http.dart' as http;
import 'package:shared_preferences/shared_preferences.dart';




void main() {

  setUpAll(nock.init);
  setUp(() {
    nock.cleanAll();
  });
  MODO.modo = 1;
/*



  testWidgets('Las lecciones se cargan correctamente', (WidgetTester tester) async {
    nock('http://${IP.ip}:5000')
        .get('/api/lesson/get-lessons/63fe53c56ac25d3aa7ac988b')
        .reply(200, json.decode('{"status":"success","tests":[{"idLeccion":"63f94104d79a4308398b1f07","testsAprobados":21},{"idLeccion":"63f941efd79a4308398b1f09","testsAprobados":0}],"progreso":[{"_id":"640b00953b591db90fceb7b1","tests":["6462a2a0225c93f0488842c4","6462a323225c93f048884330","6462a942cfa832e841abe4bc","6462b0f464bd0eebefbb223d","6463f3688c2b6286f7e6f142","6463f6a32606c48c3af9a013","6463f89c01379949cfc3e74f","6463f9752afc6dcccec57a12","6463f9f0dbc909175a27b4bb","6463fa69b79137a9948ab38c","6463fb0fc619a45251a81cfb","6463fcb7cfa8f090e22704a9","6463fe830f2be99c40795f40","6463ff7ffff8e6de45c739df","646400379180fbf28af24b98","646400b45ca211fe0422a78c","64640152a17e89692d9b63c6","646402bfd8e5522c39fedec5","64640396525b19529562d016","64640661b66062ee2443445f","646406a2d256fbc576181989"],"idUsuario":"63fe53c56ac25d3aa7ac988b","idLeccion":"63f94104d79a4308398b1f07","__v":74,"completado":true},{"_id":"645c1708eb76fda410d2fbe0","tests":[],"idUsuario":"63fe53c56ac25d3aa7ac988b","idLeccion":"63f941efd79a4308398b1f09","completado":false,"__v":7}],"leccion":[{"_id":"63f94104d79a4308398b1f07","nombre":"Introducción","texto":"adasdasdasdasd","contenido":[{"tipo":"titulo","texto":"¿Qué es el sonido?"},{"tipo":"texto","texto":"Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro. El sonido posee las siguientes cualidades físicas: • Tono:  Viene determinada por la frecuencia de la vibración sonora y se mide en Hercios (Hz). Nos permite reconocer si un sonido es agudo (alta frecuencia) o grave (baja frecuencia). • Volumen: Intensidad o amplitud de la vibración sonora. Se mide en Decibelios (dB) y clasifica los sonidos en fuertes o suaves. • Duración: Tiempo que dura la vibración sonora. Está asociada al ritmo musical. • Timbre: Aquel que nos permite distinguir dos sonidos de igual tono(frecuencia) e intensidad. "},{"tipo":"img","texto":"musica1.png"},{"tipo":"titulo","texto":"¿Qué es la música?"},{"tipo":"texto","texto":"Es el arte de combinar el sonido con el tiempo. Tiene tres elementos fundamentales:"},{"tipo":"titulo","texto":"Melodía"},{"tipo":"texto","texto":"Es una sucesión lineal de sonidos que es percibida como una sola unidad."},{"tipo":"titulo","texto":"Armonía"},{"tipo":"texto","texto":"Es la combinación de varias notas que suenan al mismo tiempo."},{"tipo":"titulo","texto":"Ritmo"},{"tipo":"texto","texto":"Es la distribución de sonidos en el tiempo."},{"tipo":"img","texto":"metronomo.png"},{"tipo":"titulo","texto":"¿Qué es el lenguaje musical?"},{"tipo":"texto","texto":"Estudio de las cualidades o elementos de la música."}],"imagenprincipal":"musica.png"},{"_id":"64387a88b5af7c8a197a70cf","nombre":"Los instrumentos","imagenprincipal":"musica.jpg","contenido":[{"tipo":"img","texto":"orquesta.jpg"},{"tipo":"img","texto":""}],"__v":0},{"_id":"63f941fed79a4308398b1f0a","nombre":"Figuras musicales","texto":"dasdsdasdasdasdasdasda","contenido":[{"tipo":"titulo","texto":"¿Qué es el sonido?"},{"tipo":"texto","texto":"Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro. El sonido posee las siguientes cualidades físicas: • Tono:  Viene determinada por la frecuencia de la vibración sonora y se mide en Hercios (Hz). Nos permite reconocer si un sonido es agudo (alta frecuencia) o grave (baja frecuencia). • Volumen: Intensidad o amplitud de la vibración sonora. Se mide en Decibelios (dB) y clasifica los sonidos en fuertes o suaves. • Duración: Tiempo que dura la vibración sonora. Está asociada al ritmo musical. • Timbre: Aquel que nos permite distinguir dos sonidos de igual tono(frecuencia) e intensidad. "},{"tipo":"img","texto":"musica1.png"},{"tipo":"titulo","texto":"¿Qué es la música?"},{"tipo":"texto","texto":"Es el arte de combinar el sonido con el tiempo. Tiene tres elementos fundamentales:"},{"tipo":"titulo","texto":"Melodía"},{"tipo":"texto","texto":"Es una sucesión lineal de sonidos que es percibida como una sola unidad."},{"tipo":"titulo","texto":"Armonía"},{"tipo":"texto","texto":"Es la combinación de varias notas que suenan al mismo tiempo."},{"tipo":"titulo","texto":"Ritmo"},{"tipo":"texto","texto":"Es la distribución de sonidos en el tiempo."},{"tipo":"img","texto":"metronomo.png"},{"tipo":"titulo","texto":"¿Qué es el lenguaje musical?"},{"tipo":"texto","texto":"Estudio de las cualidades o elementos de la música."}],"imagenprincipal":"leccion3.png"},{"_id":"63f941efd79a4308398b1f09","nombre":"pruebamodificada","texto":"dasdsdasdasdasdasdasda","contenido":[{"tipo":"titulo","texto":"ad"},{"tipo":"imagen","texto":"bd"},{"tipo":"texto","texto":"cd"},{"tipo":"titulo","texto":"dd"},{"tipo":"texto","texto":"ed"}],"imagenprincipal":"pruebamod.png"}],"mensaje":"Las lecciones se ha encontrado"}'));

    await tester.pumpWidget(
        MyApp()
    );

    await tester.pump();
    expect(find.text('Los instrumentos'), findsOneWidget);

  });*/



 testWidgets('Las lecciones se cargan correctamente', (WidgetTester tester) async {
    nock('http://${IP.ip}:5000').post('/api/user/login', {'correo': 'profe@correo', 'password': 'profe' } ).reply(200, '{"status":"success","usuario":{"_id":"63fe53c56ac25d3aa7ac988b","nombre":"Luis","password":"2b10BZE7YIw2Ia41jB3sP7xcCeII6K27zWOo6tP5LT9V6Gfix8jGqU6KW","apellidos":["López","Escudero"],"rol":"Profesor","correo":"profe@correo","foto":"Screenshot%202023-05-08%20at%2022-19-19%20ThisPersonDoesNotExist%20-%20Random%20AI%20Generado%20Fotos%20de%20Personas%20Falsas.png","__v":1,"username":"profemusical","logros":["6452d2dbe0319ab98bd4993c","6452d2dbe0319ab98bd4993b","6452d2dbe0319ab98bd4993a","6452d3ace0319ab98bd4993f","6452d3ace0319ab98bd49940","6452d3ace0319ab98bd49943","6452d3ace0319ab98bd49941","6452d4d2e0319ab98bd49951"]},"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiI2M2ZlNTNjNTZhYzI1ZDNhYTdhYzk4OGIiLCJpYXQiOjE2ODY3ODMwNjQsImV4cCI6MTY4Njc5NzQ2NH0.r5tzn1e4eBa5XJN7ji1cQkP_yvdZ1R-PriDwRytuwco","expiresIn":14400,"mensaje":"El usuario se ha encontrado"}');


       nock('http://${IP.ip}:5000')
        .get('/api/lesson/get-lessons/63fe53c56ac25d3aa7ac988b')
        .reply(200, json.decode('{"status":"success","tests":[{"idLeccion":"63f94104d79a4308398b1f07","testsAprobados":21},{"idLeccion":"63f941efd79a4308398b1f09","testsAprobados":0}],"progreso":[{"_id":"640b00953b591db90fceb7b1","tests":["6462a2a0225c93f0488842c4","6462a323225c93f048884330","6462a942cfa832e841abe4bc","6462b0f464bd0eebefbb223d","6463f3688c2b6286f7e6f142","6463f6a32606c48c3af9a013","6463f89c01379949cfc3e74f","6463f9752afc6dcccec57a12","6463f9f0dbc909175a27b4bb","6463fa69b79137a9948ab38c","6463fb0fc619a45251a81cfb","6463fcb7cfa8f090e22704a9","6463fe830f2be99c40795f40","6463ff7ffff8e6de45c739df","646400379180fbf28af24b98","646400b45ca211fe0422a78c","64640152a17e89692d9b63c6","646402bfd8e5522c39fedec5","64640396525b19529562d016","64640661b66062ee2443445f","646406a2d256fbc576181989"],"idUsuario":"63fe53c56ac25d3aa7ac988b","idLeccion":"63f94104d79a4308398b1f07","__v":74,"completado":true},{"_id":"645c1708eb76fda410d2fbe0","tests":[],"idUsuario":"63fe53c56ac25d3aa7ac988b","idLeccion":"63f941efd79a4308398b1f09","completado":false,"__v":7}],"leccion":[{"_id":"63f94104d79a4308398b1f07","nombre":"Introduccion","texto":"adasdasdasdasd","contenido":[{"tipo":"titulo","texto":"Que es el sonido"},{"tipo":"texto","texto":"Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro. El sonido posee las siguientes cualidades físicas: • Tono:  Viene determinada por la frecuencia de la vibración sonora y se mide en Hercios (Hz). Nos permite reconocer si un sonido es agudo (alta frecuencia) o grave (baja frecuencia). • Volumen: Intensidad o amplitud de la vibración sonora. Se mide en Decibelios (dB) y clasifica los sonidos en fuertes o suaves. • Duración: Tiempo que dura la vibración sonora. Está asociada al ritmo musical. • Timbre: Aquel que nos permite distinguir dos sonidos de igual tono(frecuencia) e intensidad. "},{"tipo":"img","texto":"musica1.png"},{"tipo":"titulo","texto":"¿Qué es la música?"},{"tipo":"texto","texto":"Es el arte de combinar el sonido con el tiempo. Tiene tres elementos fundamentales:"},{"tipo":"titulo","texto":"Melodía"},{"tipo":"texto","texto":"Es una sucesión lineal de sonidos que es percibida como una sola unidad."},{"tipo":"titulo","texto":"Armonía"},{"tipo":"texto","texto":"Es la combinación de varias notas que suenan al mismo tiempo."},{"tipo":"titulo","texto":"Ritmo"},{"tipo":"texto","texto":"Es la distribución de sonidos en el tiempo."},{"tipo":"img","texto":"metronomo.png"},{"tipo":"titulo","texto":"¿Qué es el lenguaje musical?"},{"tipo":"texto","texto":"Estudio de las cualidades o elementos de la música."}],"imagenprincipal":"musica.png"},{"_id":"64387a88b5af7c8a197a70cf","nombre":"Los instrumentos","imagenprincipal":"musica.jpg","contenido":[{"tipo":"img","texto":"orquesta.jpg"},{"tipo":"img","texto":""}],"__v":0},{"_id":"63f941fed79a4308398b1f0a","nombre":"Figuras musicales","texto":"dasdsdasdasdasdasdasda","contenido":[{"tipo":"titulo","texto":"Que es el sonido?"},{"tipo":"texto","texto":"Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro. El sonido posee las siguientes cualidades físicas: • Tono:  Viene determinada por la frecuencia de la vibración sonora y se mide en Hercios (Hz). Nos permite reconocer si un sonido es agudo (alta frecuencia) o grave (baja frecuencia). • Volumen: Intensidad o amplitud de la vibración sonora. Se mide en Decibelios (dB) y clasifica los sonidos en fuertes o suaves. • Duración: Tiempo que dura la vibración sonora. Está asociada al ritmo musical. • Timbre: Aquel que nos permite distinguir dos sonidos de igual tono(frecuencia) e intensidad. "},{"tipo":"img","texto":"musica1.png"},{"tipo":"titulo","texto":"¿Qué es la música?"},{"tipo":"texto","texto":"Es el arte de combinar el sonido con el tiempo. Tiene tres elementos fundamentales:"},{"tipo":"titulo","texto":"Melodía"},{"tipo":"texto","texto":"Es una sucesión lineal de sonidos que es percibida como una sola unidad."},{"tipo":"titulo","texto":"Armonía"},{"tipo":"texto","texto":"Es la combinación de varias notas que suenan al mismo tiempo."},{"tipo":"titulo","texto":"Ritmo"},{"tipo":"texto","texto":"Es la distribución de sonidos en el tiempo."},{"tipo":"img","texto":"metronomo.png"},{"tipo":"titulo","texto":"¿Qué es el lenguaje musical?"},{"tipo":"texto","texto":"Estudio de las cualidades o elementos de la música."}],"imagenprincipal":"leccion3.png"},{"_id":"63f941efd79a4308398b1f09","nombre":"pruebamodificada","texto":"dasdsdasdasdasdasdasda","contenido":[{"tipo":"titulo","texto":"ad"},{"tipo":"imagen","texto":"bd"},{"tipo":"texto","texto":"cd"},{"tipo":"titulo","texto":"dd"},{"tipo":"texto","texto":"ed"}],"imagenprincipal":"pruebamod.png"}],"mensaje":"Las lecciones se ha encontrado"}'));
    nock('http://${IP.ip}:5000')
        .get('/api/lesson/get-lessons/63fe53c56ac25d3aa7ac988b')
        .reply(200, json.decode('{"status":"success","tests":[{"idLeccion":"63f94104d79a4308398b1f07","testsAprobados":21},{"idLeccion":"63f941efd79a4308398b1f09","testsAprobados":0}],"progreso":[{"_id":"640b00953b591db90fceb7b1","tests":["6462a2a0225c93f0488842c4","6462a323225c93f048884330","6462a942cfa832e841abe4bc","6462b0f464bd0eebefbb223d","6463f3688c2b6286f7e6f142","6463f6a32606c48c3af9a013","6463f89c01379949cfc3e74f","6463f9752afc6dcccec57a12","6463f9f0dbc909175a27b4bb","6463fa69b79137a9948ab38c","6463fb0fc619a45251a81cfb","6463fcb7cfa8f090e22704a9","6463fe830f2be99c40795f40","6463ff7ffff8e6de45c739df","646400379180fbf28af24b98","646400b45ca211fe0422a78c","64640152a17e89692d9b63c6","646402bfd8e5522c39fedec5","64640396525b19529562d016","64640661b66062ee2443445f","646406a2d256fbc576181989"],"idUsuario":"63fe53c56ac25d3aa7ac988b","idLeccion":"63f94104d79a4308398b1f07","__v":74,"completado":true},{"_id":"645c1708eb76fda410d2fbe0","tests":[],"idUsuario":"63fe53c56ac25d3aa7ac988b","idLeccion":"63f941efd79a4308398b1f09","completado":false,"__v":7}],"leccion":[{"_id":"63f94104d79a4308398b1f07","nombre":"Introduccion","texto":"adasdasdasdasd","contenido":[{"tipo":"titulo","texto":"Que es el sonido"},{"tipo":"texto","texto":"Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro. El sonido posee las siguientes cualidades físicas: • Tono:  Viene determinada por la frecuencia de la vibración sonora y se mide en Hercios (Hz). Nos permite reconocer si un sonido es agudo (alta frecuencia) o grave (baja frecuencia). • Volumen: Intensidad o amplitud de la vibración sonora. Se mide en Decibelios (dB) y clasifica los sonidos en fuertes o suaves. • Duración: Tiempo que dura la vibración sonora. Está asociada al ritmo musical. • Timbre: Aquel que nos permite distinguir dos sonidos de igual tono(frecuencia) e intensidad. "},{"tipo":"img","texto":"musica1.png"},{"tipo":"titulo","texto":"¿Qué es la música?"},{"tipo":"texto","texto":"Es el arte de combinar el sonido con el tiempo. Tiene tres elementos fundamentales:"},{"tipo":"titulo","texto":"Melodía"},{"tipo":"texto","texto":"Es una sucesión lineal de sonidos que es percibida como una sola unidad."},{"tipo":"titulo","texto":"Armonía"},{"tipo":"texto","texto":"Es la combinación de varias notas que suenan al mismo tiempo."},{"tipo":"titulo","texto":"Ritmo"},{"tipo":"texto","texto":"Es la distribución de sonidos en el tiempo."},{"tipo":"img","texto":"metronomo.png"},{"tipo":"titulo","texto":"¿Qué es el lenguaje musical?"},{"tipo":"texto","texto":"Estudio de las cualidades o elementos de la música."}],"imagenprincipal":"musica.png"},{"_id":"64387a88b5af7c8a197a70cf","nombre":"Los instrumentos","imagenprincipal":"musica.jpg","contenido":[{"tipo":"img","texto":"orquesta.jpg"},{"tipo":"img","texto":""}],"__v":0},{"_id":"63f941fed79a4308398b1f0a","nombre":"Figuras musicales","texto":"dasdsdasdasdasdasdasda","contenido":[{"tipo":"titulo","texto":"Que es el sonido"},{"tipo":"texto","texto":"Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro. El sonido posee las siguientes cualidades físicas: • Tono:  Viene determinada por la frecuencia de la vibración sonora y se mide en Hercios (Hz). Nos permite reconocer si un sonido es agudo (alta frecuencia) o grave (baja frecuencia). • Volumen: Intensidad o amplitud de la vibración sonora. Se mide en Decibelios (dB) y clasifica los sonidos en fuertes o suaves. • Duración: Tiempo que dura la vibración sonora. Está asociada al ritmo musical. • Timbre: Aquel que nos permite distinguir dos sonidos de igual tono(frecuencia) e intensidad. "},{"tipo":"img","texto":"musica1.png"},{"tipo":"titulo","texto":"¿Qué es la música?"},{"tipo":"texto","texto":"Es el arte de combinar el sonido con el tiempo. Tiene tres elementos fundamentales:"},{"tipo":"titulo","texto":"Melodía"},{"tipo":"texto","texto":"Es una sucesión lineal de sonidos que es percibida como una sola unidad."},{"tipo":"titulo","texto":"Armonía"},{"tipo":"texto","texto":"Es la combinación de varias notas que suenan al mismo tiempo."},{"tipo":"titulo","texto":"Ritmo"},{"tipo":"texto","texto":"Es la distribución de sonidos en el tiempo."},{"tipo":"img","texto":"metronomo.png"},{"tipo":"titulo","texto":"¿Qué es el lenguaje musical?"},{"tipo":"texto","texto":"Estudio de las cualidades o elementos de la música."}],"imagenprincipal":"leccion3.png"},{"_id":"63f941efd79a4308398b1f09","nombre":"pruebamodificada","texto":"dasdsdasdasdasdasdasda","contenido":[{"tipo":"titulo","texto":"ad"},{"tipo":"imagen","texto":"bd"},{"tipo":"texto","texto":"cd"},{"tipo":"titulo","texto":"dd"},{"tipo":"texto","texto":"ed"}],"imagenprincipal":"pruebamod.png"}],"mensaje":"Las lecciones se ha encontrado"}'));


    await tester.pumpWidget(
        MyApp()
    );


    await tester.pump();

    expect(find.text('MELOUDY'),findsWidgets);
    await tester.pump();

    await tester.enterText(find.byKey(Key('correo')), 'profe@correo');
    await tester.pump();

    await tester.enterText(find.byKey(Key('password')), 'profe');
    await tester.pump();

    await tester.tap(find.text('INICIAR SESIÓN'));

    await tester.pump();
    expect(find.text('Los instrumentos'), findsOneWidget);
 });


  testWidgets('La lección se carga correctamente', (WidgetTester tester) async {
    nock('http://${IP.ip}:5000').post('/api/user/login', {'correo': 'profe@correo', 'password': 'profe' } ).reply(200, '{"status":"success","usuario":{"_id":"63fe53c56ac25d3aa7ac988b","nombre":"Luis","password":"2b10BZE7YIw2Ia41jB3sP7xcCeII6K27zWOo6tP5LT9V6Gfix8jGqU6KW","apellidos":["López","Escudero"],"rol":"Profesor","correo":"profe@correo","foto":"Screenshot%202023-05-08%20at%2022-19-19%20ThisPersonDoesNotExist%20-%20Random%20AI%20Generado%20Fotos%20de%20Personas%20Falsas.png","__v":1,"username":"profemusical","logros":["6452d2dbe0319ab98bd4993c","6452d2dbe0319ab98bd4993b","6452d2dbe0319ab98bd4993a","6452d3ace0319ab98bd4993f","6452d3ace0319ab98bd49940","6452d3ace0319ab98bd49943","6452d3ace0319ab98bd49941","6452d4d2e0319ab98bd49951"]},"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiI2M2ZlNTNjNTZhYzI1ZDNhYTdhYzk4OGIiLCJpYXQiOjE2ODY3ODMwNjQsImV4cCI6MTY4Njc5NzQ2NH0.r5tzn1e4eBa5XJN7ji1cQkP_yvdZ1R-PriDwRytuwco","expiresIn":14400,"mensaje":"El usuario se ha encontrado"}');

    nock('http://${IP.ip}:5000')
        .get('/api/lesson/get-lessons/63fe53c56ac25d3aa7ac988b')
        .reply(200, json.decode('{"status":"success","tests":[{"idLeccion":"63f94104d79a4308398b1f07","testsAprobados":21},{"idLeccion":"63f941efd79a4308398b1f09","testsAprobados":0}],"progreso":[{"_id":"640b00953b591db90fceb7b1","tests":["6462a2a0225c93f0488842c4","6462a323225c93f048884330","6462a942cfa832e841abe4bc","6462b0f464bd0eebefbb223d","6463f3688c2b6286f7e6f142","6463f6a32606c48c3af9a013","6463f89c01379949cfc3e74f","6463f9752afc6dcccec57a12","6463f9f0dbc909175a27b4bb","6463fa69b79137a9948ab38c","6463fb0fc619a45251a81cfb","6463fcb7cfa8f090e22704a9","6463fe830f2be99c40795f40","6463ff7ffff8e6de45c739df","646400379180fbf28af24b98","646400b45ca211fe0422a78c","64640152a17e89692d9b63c6","646402bfd8e5522c39fedec5","64640396525b19529562d016","64640661b66062ee2443445f","646406a2d256fbc576181989"],"idUsuario":"63fe53c56ac25d3aa7ac988b","idLeccion":"63f94104d79a4308398b1f07","__v":74,"completado":true},{"_id":"645c1708eb76fda410d2fbe0","tests":[],"idUsuario":"63fe53c56ac25d3aa7ac988b","idLeccion":"63f941efd79a4308398b1f09","completado":false,"__v":7}],"leccion":[{"_id":"63f94104d79a4308398b1f07","nombre":"Introduccion","texto":"adasdasdasdasd","contenido":[{"tipo":"titulo","texto":"Que es el sonido"},{"tipo":"texto","texto":"Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro. El sonido posee las siguientes cualidades físicas: • Tono:  Viene determinada por la frecuencia de la vibración sonora y se mide en Hercios (Hz). Nos permite reconocer si un sonido es agudo (alta frecuencia) o grave (baja frecuencia). • Volumen: Intensidad o amplitud de la vibración sonora. Se mide en Decibelios (dB) y clasifica los sonidos en fuertes o suaves. • Duración: Tiempo que dura la vibración sonora. Está asociada al ritmo musical. • Timbre: Aquel que nos permite distinguir dos sonidos de igual tono(frecuencia) e intensidad. "},{"tipo":"img","texto":"musica1.png"},{"tipo":"titulo","texto":"¿Qué es la música?"},{"tipo":"texto","texto":"Es el arte de combinar el sonido con el tiempo. Tiene tres elementos fundamentales:"},{"tipo":"titulo","texto":"Melodía"},{"tipo":"texto","texto":"Es una sucesión lineal de sonidos que es percibida como una sola unidad."},{"tipo":"titulo","texto":"Armonía"},{"tipo":"texto","texto":"Es la combinación de varias notas que suenan al mismo tiempo."},{"tipo":"titulo","texto":"Ritmo"},{"tipo":"texto","texto":"Es la distribución de sonidos en el tiempo."},{"tipo":"img","texto":"metronomo.png"},{"tipo":"titulo","texto":"¿Que es el lenguaje musical?"},{"tipo":"texto","texto":"Estudio de las cualidades o elementos de la música."}],"imagenprincipal":"musica.png"},{"_id":"64387a88b5af7c8a197a70cf","nombre":"Los instrumentos","imagenprincipal":"musica.jpg","contenido":[{"tipo":"img","texto":"orquesta.jpg"},{"tipo":"img","texto":""}],"__v":0},{"_id":"63f941fed79a4308398b1f0a","nombre":"Figuras musicales","texto":"dasdsdasdasdasdasdasda","contenido":[{"tipo":"titulo","texto":"Que es el sonido"},{"tipo":"texto","texto":"Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro. El sonido posee las siguientes cualidades físicas: • Tono:  Viene determinada por la frecuencia de la vibración sonora y se mide en Hercios (Hz). Nos permite reconocer si un sonido es agudo (alta frecuencia) o grave (baja frecuencia). • Volumen: Intensidad o amplitud de la vibración sonora. Se mide en Decibelios (dB) y clasifica los sonidos en fuertes o suaves. • Duración: Tiempo que dura la vibración sonora. Está asociada al ritmo musical. • Timbre: Aquel que nos permite distinguir dos sonidos de igual tono(frecuencia) e intensidad. "},{"tipo":"img","texto":"musica1.png"},{"tipo":"titulo","texto":"¿Qué es la música?"},{"tipo":"texto","texto":"Es el arte de combinar el sonido con el tiempo. Tiene tres elementos fundamentales:"},{"tipo":"titulo","texto":"Melodía"},{"tipo":"texto","texto":"Es una sucesión lineal de sonidos que es percibida como una sola unidad."},{"tipo":"titulo","texto":"Armonía"},{"tipo":"texto","texto":"Es la combinación de varias notas que suenan al mismo tiempo."},{"tipo":"titulo","texto":"Ritmo"},{"tipo":"texto","texto":"Es la distribución de sonidos en el tiempo."},{"tipo":"img","texto":"metronomo.png"},{"tipo":"titulo","texto":"¿Qué es el lenguaje musical?"},{"tipo":"texto","texto":"Estudio de las cualidades o elementos de la música."}],"imagenprincipal":"leccion3.png"},{"_id":"63f941efd79a4308398b1f09","nombre":"pruebamodificada","texto":"dasdsdasdasdasdasdasda","contenido":[{"tipo":"titulo","texto":"ad"},{"tipo":"imagen","texto":"bd"},{"tipo":"texto","texto":"cd"},{"tipo":"titulo","texto":"dd"},{"tipo":"texto","texto":"ed"}],"imagenprincipal":"pruebamod.png"}],"mensaje":"Las lecciones se ha encontrado"}'));
    nock('http://${IP.ip}:5000')
        .get('/api/lesson/get-lessons/63fe53c56ac25d3aa7ac988b')
        .reply(200, json.decode('{"status":"success","tests":[{"idLeccion":"63f94104d79a4308398b1f07","testsAprobados":21},{"idLeccion":"63f941efd79a4308398b1f09","testsAprobados":0}],"progreso":[{"_id":"640b00953b591db90fceb7b1","tests":["6462a2a0225c93f0488842c4","6462a323225c93f048884330","6462a942cfa832e841abe4bc","6462b0f464bd0eebefbb223d","6463f3688c2b6286f7e6f142","6463f6a32606c48c3af9a013","6463f89c01379949cfc3e74f","6463f9752afc6dcccec57a12","6463f9f0dbc909175a27b4bb","6463fa69b79137a9948ab38c","6463fb0fc619a45251a81cfb","6463fcb7cfa8f090e22704a9","6463fe830f2be99c40795f40","6463ff7ffff8e6de45c739df","646400379180fbf28af24b98","646400b45ca211fe0422a78c","64640152a17e89692d9b63c6","646402bfd8e5522c39fedec5","64640396525b19529562d016","64640661b66062ee2443445f","646406a2d256fbc576181989"],"idUsuario":"63fe53c56ac25d3aa7ac988b","idLeccion":"63f94104d79a4308398b1f07","__v":74,"completado":true},{"_id":"645c1708eb76fda410d2fbe0","tests":[],"idUsuario":"63fe53c56ac25d3aa7ac988b","idLeccion":"63f941efd79a4308398b1f09","completado":false,"__v":7}],"leccion":[{"_id":"63f94104d79a4308398b1f07","nombre":"Introduccion","texto":"adasdasdasdasd","contenido":[{"tipo":"titulo","texto":"Que es el sonido"},{"tipo":"texto","texto":"Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro. El sonido posee las siguientes cualidades físicas: • Tono:  Viene determinada por la frecuencia de la vibración sonora y se mide en Hercios (Hz). Nos permite reconocer si un sonido es agudo (alta frecuencia) o grave (baja frecuencia). • Volumen: Intensidad o amplitud de la vibración sonora. Se mide en Decibelios (dB) y clasifica los sonidos en fuertes o suaves. • Duración: Tiempo que dura la vibración sonora. Está asociada al ritmo musical. • Timbre: Aquel que nos permite distinguir dos sonidos de igual tono(frecuencia) e intensidad. "},{"tipo":"img","texto":"musica1.png"},{"tipo":"titulo","texto":"¿Qué es la música?"},{"tipo":"texto","texto":"Es el arte de combinar el sonido con el tiempo. Tiene tres elementos fundamentales:"},{"tipo":"titulo","texto":"Melodía"},{"tipo":"texto","texto":"Es una sucesión lineal de sonidos que es percibida como una sola unidad."},{"tipo":"titulo","texto":"Armonía"},{"tipo":"texto","texto":"Es la combinación de varias notas que suenan al mismo tiempo."},{"tipo":"titulo","texto":"Ritmo"},{"tipo":"texto","texto":"Es la distribución de sonidos en el tiempo."},{"tipo":"img","texto":"metronomo.png"},{"tipo":"titulo","texto":"¿Que es el lenguaje musical?"},{"tipo":"texto","texto":"Estudio de las cualidades o elementos de la música."}],"imagenprincipal":"musica.png"},{"_id":"64387a88b5af7c8a197a70cf","nombre":"Los instrumentos","imagenprincipal":"musica.jpg","contenido":[{"tipo":"img","texto":"orquesta.jpg"},{"tipo":"img","texto":""}],"__v":0},{"_id":"63f941fed79a4308398b1f0a","nombre":"Figuras musicales","texto":"dasdsdasdasdasdasdasda","contenido":[{"tipo":"titulo","texto":"Que es el sonido"},{"tipo":"texto","texto":"Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro. El sonido posee las siguientes cualidades físicas: • Tono:  Viene determinada por la frecuencia de la vibración sonora y se mide en Hercios (Hz). Nos permite reconocer si un sonido es agudo (alta frecuencia) o grave (baja frecuencia). • Volumen: Intensidad o amplitud de la vibración sonora. Se mide en Decibelios (dB) y clasifica los sonidos en fuertes o suaves. • Duración: Tiempo que dura la vibración sonora. Está asociada al ritmo musical. • Timbre: Aquel que nos permite distinguir dos sonidos de igual tono(frecuencia) e intensidad. "},{"tipo":"img","texto":"musica1.png"},{"tipo":"titulo","texto":"¿Qué es la música?"},{"tipo":"texto","texto":"Es el arte de combinar el sonido con el tiempo. Tiene tres elementos fundamentales:"},{"tipo":"titulo","texto":"Melodía"},{"tipo":"texto","texto":"Es una sucesión lineal de sonidos que es percibida como una sola unidad."},{"tipo":"titulo","texto":"Armonía"},{"tipo":"texto","texto":"Es la combinación de varias notas que suenan al mismo tiempo."},{"tipo":"titulo","texto":"Ritmo"},{"tipo":"texto","texto":"Es la distribución de sonidos en el tiempo."},{"tipo":"img","texto":"metronomo.png"},{"tipo":"titulo","texto":"¿Qué es el lenguaje musical?"},{"tipo":"texto","texto":"Estudio de las cualidades o elementos de la música."}],"imagenprincipal":"leccion3.png"},{"_id":"63f941efd79a4308398b1f09","nombre":"pruebamodificada","texto":"dasdsdasdasdasdasdasda","contenido":[{"tipo":"titulo","texto":"ad"},{"tipo":"imagen","texto":"bd"},{"tipo":"texto","texto":"cd"},{"tipo":"titulo","texto":"dd"},{"tipo":"texto","texto":"ed"}],"imagenprincipal":"pruebamod.png"}],"mensaje":"Las lecciones se ha encontrado"}'));

    nock('http://${IP.ip}:5000')
        .get('/api/question/get-questions/63f94104d79a4308398b1f07?auth=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiI2M2ZlNTNjNTZhYzI1ZDNhYTdhYzk4OGIiLCJpYXQiOjE2ODY3ODMwNjQsImV4cCI6MTY4Njc5NzQ2NH0.r5tzn1e4eBa5XJN7ji1cQkP_yvdZ1R-PriDwRytuwco')
        .reply(200, json.decode('{"status":"success","preguntas":[{"_id":"6405144d20563dd96aaf6702","tipo":"unica","cuestion":"¿Qué es la música?","respuestascorrectas":["2"],"opciones":["Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro.","Es un hobbie que consiste en tocar un instrumento.","Es el arte de combinar el sonido con el tiempo.","Es el arte de estudiar el sonido y el tiempo."],"imagen":"queeslamusica.png","leccion":"63f94104d79a4308398b1f07"},{"_id":"6405155820563dd96aaf6704","tipo":"unica","cuestion":"¿Qué es el sonido?","respuestascorrectas":["2"],"opciones":["Es lo contrario al ruido.","Es una onda que se propaga solo por el aire, producida por la vibración de un cuerpo sonoro.","Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro.","Es un rayo invisible que se propaga por el aire u otro medio."],"imagen":"queeselsonido.png","leccion":"63f94104d79a4308398b1f07"},{"_id":"6405156b20563dd96aaf6705","tipo":"multiple","cuestion":"¿Cuáles de las siguientes opciones son cualidades de un sonido?","respuestascorrectas":["2","3","4"],"opciones":["melodia","decibelios","duracion","volumen","tono","agudo"],"imagen":"cualidadessonido.png","leccion":"63f94104d79a4308398b1f07"},{"_id":"640515d420563dd96aaf6706","tipo":"unica","cuestion":"¿Qué es el ritmo?","respuestascorrectas":["0"],"opciones":["Es la distribución de sonidos en el tiempo.","Son los golpes de los tambores en una canción.","Es la distribución de sonidos en el espacio.","Es la duración de un sonido"],"imagen":"ritmo.jpg","leccion":"63f94104d79a4308398b1f07"},{"_id":"6405160920563dd96aaf6707","tipo":"unica","cuestion":"¿La duración es una cualidad del sonido?","respuestascorrectas":["0"],"opciones":["Si","No"],"imagen":"duracion.jpg","leccion":"63f94104d79a4308398b1f07"},{"_id":"6405166d20563dd96aaf6709","tipo":"unica","cuestion":"¿Qué es la melodía?","respuestascorrectas":["3"],"opciones":["Es la combinación de varias notas que suenan al mismo tiempo.","Es la parte musical de una canción.","Es una división del sonido de forma lineal.","Es una sucesión lineal de sonidos que es percibida como una sola unidad."],"imagen":"melodia.jpg","leccion":"63f94104d79a4308398b1f07"},{"_id":"6405167720563dd96aaf670a","tipo":"unica","cuestion":"¿Qué es la armonía?","respuestascorrectas":["0"],"opciones":["Es la combinación de varias notas que suenan al mismo tiempo."," Es la combinación de varias notas que suenan consecutivamente.","Es una sucesión lineal de sonidos que es percibida como una sola unidad.","Es la música que suena bien."],"imagen":"armonia.jpg","leccion":"63f94104d79a4308398b1f07"},{"opciones":[],"_id":"64070c70f2b40de2eecc8d68","tipo":"texto","cuestion":"A la combinación de varias notas que suenan al mismo tiempo la llamamos...","imagen":"armonia2.png","respuestascorrectas":["armonía","armonia"],"leccion":"63f94104d79a4308398b1f07"},{"opciones":[],"_id":"640c6d743c121ec7c8211988","tipo":"texto","cuestion":"A la sucesión lineal de sonidos que es percibida como una sola unidad la llamamos...","imagen":"melodia2.png","respuestascorrectas":["melodia"],"leccion":"63f94104d79a4308398b1f07"},{"_id":"640c6de83c121ec7c8211989","tipo":"multiple","cuestion":"¿Cuáles de las siguientes opciones son elementos de la música?","respuestascorrectas":["0","2"],"opciones":["ritmo","tono","armonía","duración","grave"],"imagen":"elementosmusica.png","leccion":"63f94104d79a4308398b1f07"},{"_id":"640c6e6e3c121ec7c821198a","tipo":"unica","cuestion":"¿Qué es la duración?","respuestascorrectas":["1"],"opciones":["Es lo mismo que el ritmo.","Es el tiempo que dura la vibración sonora.","Es una sucesión lineal de sonidos.","Es el tiempo que dura una canción."],"imagen":"duracion.jpg","leccion":"63f94104d79a4308398b1f07"},{"_id":"640c70e43c121ec7c821198b","tipo":"unica","cuestion":"¿En qué unidad se mide el volumen?","respuestascorrectas":["0"],"opciones":["Decibelios (Db).","Frecuencia (Hz).","Puntos de volumen.","Vatios (W)."],"imagen":"volumen.jpg","leccion":"63f94104d79a4308398b1f07"},{"_id":"646a4d56b6341df540d57eac","tipo":"unica","cuestion":"sdfsfd","respuestascorrectas":["0"],"opciones":["sdfsds","df"],"imagen":"musica.png","leccion":"63f94104d79a4308398b1f07","__v":0},{"_id":"648256c2cc09f8699098fda3","tipo":"multiple","cuestion":"prueba","respuestascorrectas":["a","c"],"opciones":["a","b","c","d"],"imagen":null,"leccion":"63f94104d79a4308398b1f07","__v":0}]}'));
    await tester.pumpWidget(
        MyApp()
    );

    await tester.pump();

    expect(find.text('MELOUDY'),findsWidgets);
    await tester.pump();

    await tester.enterText(find.byKey(Key('correo')), 'profe@correo');
    await tester.pump();

    await tester.enterText(find.byKey(Key('password')), 'profe');
    await tester.pump();

    await tester.tap(find.text('INICIAR SESIÓN'));

    await tester.pump();

    expect(find.text('Introduccion'), findsOneWidget);

    await tester.tap(find.text("Introduccion"));
    await tester.pumpAndSettle();


    expect(find.text('Historial'), findsOneWidget);


  });

  testWidgets('El drawer se abre correctamente', (WidgetTester tester) async {
    nock('http://${IP.ip}:5000')
        .get('/api/lesson/get-lessons/63fe53c56ac25d3aa7ac988b')
        .reply(200, json.decode('{"status":"success","tests":[{"idLeccion":"63f94104d79a4308398b1f07","testsAprobados":21},{"idLeccion":"63f941efd79a4308398b1f09","testsAprobados":0}],"progreso":[{"_id":"640b00953b591db90fceb7b1","tests":["6462a2a0225c93f0488842c4","6462a323225c93f048884330","6462a942cfa832e841abe4bc","6462b0f464bd0eebefbb223d","6463f3688c2b6286f7e6f142","6463f6a32606c48c3af9a013","6463f89c01379949cfc3e74f","6463f9752afc6dcccec57a12","6463f9f0dbc909175a27b4bb","6463fa69b79137a9948ab38c","6463fb0fc619a45251a81cfb","6463fcb7cfa8f090e22704a9","6463fe830f2be99c40795f40","6463ff7ffff8e6de45c739df","646400379180fbf28af24b98","646400b45ca211fe0422a78c","64640152a17e89692d9b63c6","646402bfd8e5522c39fedec5","64640396525b19529562d016","64640661b66062ee2443445f","646406a2d256fbc576181989"],"idUsuario":"63fe53c56ac25d3aa7ac988b","idLeccion":"63f94104d79a4308398b1f07","__v":74,"completado":true},{"_id":"645c1708eb76fda410d2fbe0","tests":[],"idUsuario":"63fe53c56ac25d3aa7ac988b","idLeccion":"63f941efd79a4308398b1f09","completado":false,"__v":7}],"leccion":[{"_id":"63f94104d79a4308398b1f07","nombre":"Introduccion","texto":"adasdasdasdasd","contenido":[{"tipo":"titulo","texto":"¿Qué es el sonido?"},{"tipo":"texto","texto":"Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro. El sonido posee las siguientes cualidades físicas: • Tono:  Viene determinada por la frecuencia de la vibración sonora y se mide en Hercios (Hz). Nos permite reconocer si un sonido es agudo (alta frecuencia) o grave (baja frecuencia). • Volumen: Intensidad o amplitud de la vibración sonora. Se mide en Decibelios (dB) y clasifica los sonidos en fuertes o suaves. • Duración: Tiempo que dura la vibración sonora. Está asociada al ritmo musical. • Timbre: Aquel que nos permite distinguir dos sonidos de igual tono(frecuencia) e intensidad. "},{"tipo":"img","texto":"musica1.png"},{"tipo":"titulo","texto":"¿Qué es la música?"},{"tipo":"texto","texto":"Es el arte de combinar el sonido con el tiempo. Tiene tres elementos fundamentales:"},{"tipo":"titulo","texto":"Melodía"},{"tipo":"texto","texto":"Es una sucesión lineal de sonidos que es percibida como una sola unidad."},{"tipo":"titulo","texto":"Armonía"},{"tipo":"texto","texto":"Es la combinación de varias notas que suenan al mismo tiempo."},{"tipo":"titulo","texto":"Ritmo"},{"tipo":"texto","texto":"Es la distribución de sonidos en el tiempo."},{"tipo":"img","texto":"metronomo.png"},{"tipo":"titulo","texto":"¿Qué es el lenguaje musical?"},{"tipo":"texto","texto":"Estudio de las cualidades o elementos de la música."}],"imagenprincipal":"musica.png"},{"_id":"64387a88b5af7c8a197a70cf","nombre":"Los instrumentos","imagenprincipal":"musica.jpg","contenido":[{"tipo":"img","texto":"orquesta.jpg"},{"tipo":"img","texto":""}],"__v":0},{"_id":"63f941fed79a4308398b1f0a","nombre":"Figuras musicales","texto":"dasdsdasdasdasdasdasda","contenido":[{"tipo":"titulo","texto":"¿Qué es el sonido?"},{"tipo":"texto","texto":"Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro. El sonido posee las siguientes cualidades físicas: • Tono:  Viene determinada por la frecuencia de la vibración sonora y se mide en Hercios (Hz). Nos permite reconocer si un sonido es agudo (alta frecuencia) o grave (baja frecuencia). • Volumen: Intensidad o amplitud de la vibración sonora. Se mide en Decibelios (dB) y clasifica los sonidos en fuertes o suaves. • Duración: Tiempo que dura la vibración sonora. Está asociada al ritmo musical. • Timbre: Aquel que nos permite distinguir dos sonidos de igual tono(frecuencia) e intensidad. "},{"tipo":"img","texto":"musica1.png"},{"tipo":"titulo","texto":"¿Qué es la música?"},{"tipo":"texto","texto":"Es el arte de combinar el sonido con el tiempo. Tiene tres elementos fundamentales:"},{"tipo":"titulo","texto":"Melodía"},{"tipo":"texto","texto":"Es una sucesión lineal de sonidos que es percibida como una sola unidad."},{"tipo":"titulo","texto":"Armonía"},{"tipo":"texto","texto":"Es la combinación de varias notas que suenan al mismo tiempo."},{"tipo":"titulo","texto":"Ritmo"},{"tipo":"texto","texto":"Es la distribución de sonidos en el tiempo."},{"tipo":"img","texto":"metronomo.png"},{"tipo":"titulo","texto":"¿Qué es el lenguaje musical?"},{"tipo":"texto","texto":"Estudio de las cualidades o elementos de la música."}],"imagenprincipal":"leccion3.png"},{"_id":"63f941efd79a4308398b1f09","nombre":"pruebamodificada","texto":"dasdsdasdasdasdasdasda","contenido":[{"tipo":"titulo","texto":"ad"},{"tipo":"imagen","texto":"bd"},{"tipo":"texto","texto":"cd"},{"tipo":"titulo","texto":"dd"},{"tipo":"texto","texto":"ed"}],"imagenprincipal":"pruebamod.png"}],"mensaje":"Las lecciones se ha encontrado"}'));

    await tester.pumpWidget(
        MyApp()
    );

    await tester.pump();

    final  drawer = find.byTooltip('Open navigation menu');
    expect(drawer, findsWidgets);

    final ScaffoldState scafState = tester.firstState(find.byType(Scaffold));
    scafState.openDrawer();
    await tester.pumpAndSettle();

    expect(
      find.text('Inicio'),
      findsOneWidget,
    );

  });


  testWidgets('El dashboard se abre correctamente', (WidgetTester tester) async {
    nock('http://${IP.ip}:5000').post('/api/user/login', {'correo': 'profe@correo', 'password': 'profe' } ).reply(200, '{"status":"success","usuario":{"_id":"63fe53c56ac25d3aa7ac988b","nombre":"Luis","password":"2b10BZE7YIw2Ia41jB3sP7xcCeII6K27zWOo6tP5LT9V6Gfix8jGqU6KW","apellidos":["López","Escudero"],"rol":"Profesor","correo":"profe@correo","foto":"Screenshot%202023-05-08%20at%2022-19-19%20ThisPersonDoesNotExist%20-%20Random%20AI%20Generado%20Fotos%20de%20Personas%20Falsas.png","__v":1,"username":"profemusical","logros":["6452d2dbe0319ab98bd4993c","6452d2dbe0319ab98bd4993b","6452d2dbe0319ab98bd4993a","6452d3ace0319ab98bd4993f","6452d3ace0319ab98bd49940","6452d3ace0319ab98bd49943","6452d3ace0319ab98bd49941","6452d4d2e0319ab98bd49951"]},"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiI2M2ZlNTNjNTZhYzI1ZDNhYTdhYzk4OGIiLCJpYXQiOjE2ODY3ODMwNjQsImV4cCI6MTY4Njc5NzQ2NH0.r5tzn1e4eBa5XJN7ji1cQkP_yvdZ1R-PriDwRytuwco","expiresIn":14400,"mensaje":"El usuario se ha encontrado"}');

    nock('http://${IP.ip}:5000')
        .get('/api/lesson/get-lessons/63fe53c56ac25d3aa7ac988b')
        .reply(200, json.decode('{"status":"success","tests":[{"idLeccion":"63f94104d79a4308398b1f07","testsAprobados":21},{"idLeccion":"63f941efd79a4308398b1f09","testsAprobados":0}],"progreso":[{"_id":"640b00953b591db90fceb7b1","tests":["6462a2a0225c93f0488842c4","6462a323225c93f048884330","6462a942cfa832e841abe4bc","6462b0f464bd0eebefbb223d","6463f3688c2b6286f7e6f142","6463f6a32606c48c3af9a013","6463f89c01379949cfc3e74f","6463f9752afc6dcccec57a12","6463f9f0dbc909175a27b4bb","6463fa69b79137a9948ab38c","6463fb0fc619a45251a81cfb","6463fcb7cfa8f090e22704a9","6463fe830f2be99c40795f40","6463ff7ffff8e6de45c739df","646400379180fbf28af24b98","646400b45ca211fe0422a78c","64640152a17e89692d9b63c6","646402bfd8e5522c39fedec5","64640396525b19529562d016","64640661b66062ee2443445f","646406a2d256fbc576181989"],"idUsuario":"63fe53c56ac25d3aa7ac988b","idLeccion":"63f94104d79a4308398b1f07","__v":74,"completado":true},{"_id":"645c1708eb76fda410d2fbe0","tests":[],"idUsuario":"63fe53c56ac25d3aa7ac988b","idLeccion":"63f941efd79a4308398b1f09","completado":false,"__v":7}],"leccion":[{"_id":"63f94104d79a4308398b1f07","nombre":"Introduccion","texto":"adasdasdasdasd","contenido":[{"tipo":"titulo","texto":"Que es el sonido"},{"tipo":"texto","texto":"Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro. El sonido posee las siguientes cualidades físicas: • Tono:  Viene determinada por la frecuencia de la vibración sonora y se mide en Hercios (Hz). Nos permite reconocer si un sonido es agudo (alta frecuencia) o grave (baja frecuencia). • Volumen: Intensidad o amplitud de la vibración sonora. Se mide en Decibelios (dB) y clasifica los sonidos en fuertes o suaves. • Duración: Tiempo que dura la vibración sonora. Está asociada al ritmo musical. • Timbre: Aquel que nos permite distinguir dos sonidos de igual tono(frecuencia) e intensidad. "},{"tipo":"img","texto":"musica1.png"},{"tipo":"titulo","texto":"¿Qué es la música?"},{"tipo":"texto","texto":"Es el arte de combinar el sonido con el tiempo. Tiene tres elementos fundamentales:"},{"tipo":"titulo","texto":"Melodía"},{"tipo":"texto","texto":"Es una sucesión lineal de sonidos que es percibida como una sola unidad."},{"tipo":"titulo","texto":"Armonía"},{"tipo":"texto","texto":"Es la combinación de varias notas que suenan al mismo tiempo."},{"tipo":"titulo","texto":"Ritmo"},{"tipo":"texto","texto":"Es la distribución de sonidos en el tiempo."},{"tipo":"img","texto":"metronomo.png"},{"tipo":"titulo","texto":"¿Que es el lenguaje musical?"},{"tipo":"texto","texto":"Estudio de las cualidades o elementos de la música."}],"imagenprincipal":"musica.png"},{"_id":"64387a88b5af7c8a197a70cf","nombre":"Los instrumentos","imagenprincipal":"musica.jpg","contenido":[{"tipo":"img","texto":"orquesta.jpg"},{"tipo":"img","texto":""}],"__v":0},{"_id":"63f941fed79a4308398b1f0a","nombre":"Figuras musicales","texto":"dasdsdasdasdasdasdasda","contenido":[{"tipo":"titulo","texto":"Que es el sonido"},{"tipo":"texto","texto":"Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro. El sonido posee las siguientes cualidades físicas: • Tono:  Viene determinada por la frecuencia de la vibración sonora y se mide en Hercios (Hz). Nos permite reconocer si un sonido es agudo (alta frecuencia) o grave (baja frecuencia). • Volumen: Intensidad o amplitud de la vibración sonora. Se mide en Decibelios (dB) y clasifica los sonidos en fuertes o suaves. • Duración: Tiempo que dura la vibración sonora. Está asociada al ritmo musical. • Timbre: Aquel que nos permite distinguir dos sonidos de igual tono(frecuencia) e intensidad. "},{"tipo":"img","texto":"musica1.png"},{"tipo":"titulo","texto":"¿Qué es la música?"},{"tipo":"texto","texto":"Es el arte de combinar el sonido con el tiempo. Tiene tres elementos fundamentales:"},{"tipo":"titulo","texto":"Melodía"},{"tipo":"texto","texto":"Es una sucesión lineal de sonidos que es percibida como una sola unidad."},{"tipo":"titulo","texto":"Armonía"},{"tipo":"texto","texto":"Es la combinación de varias notas que suenan al mismo tiempo."},{"tipo":"titulo","texto":"Ritmo"},{"tipo":"texto","texto":"Es la distribución de sonidos en el tiempo."},{"tipo":"img","texto":"metronomo.png"},{"tipo":"titulo","texto":"¿Qué es el lenguaje musical?"},{"tipo":"texto","texto":"Estudio de las cualidades o elementos de la música."}],"imagenprincipal":"leccion3.png"},{"_id":"63f941efd79a4308398b1f09","nombre":"pruebamodificada","texto":"dasdsdasdasdasdasdasda","contenido":[{"tipo":"titulo","texto":"ad"},{"tipo":"imagen","texto":"bd"},{"tipo":"texto","texto":"cd"},{"tipo":"titulo","texto":"dd"},{"tipo":"texto","texto":"ed"}],"imagenprincipal":"pruebamod.png"}],"mensaje":"Las lecciones se ha encontrado"}'));
    nock('http://${IP.ip}:5000')
        .get('/api/lesson/get-lessons/63fe53c56ac25d3aa7ac988b')
        .reply(200, json.decode('{"status":"success","tests":[{"idLeccion":"63f94104d79a4308398b1f07","testsAprobados":21},{"idLeccion":"63f941efd79a4308398b1f09","testsAprobados":0}],"progreso":[{"_id":"640b00953b591db90fceb7b1","tests":["6462a2a0225c93f0488842c4","6462a323225c93f048884330","6462a942cfa832e841abe4bc","6462b0f464bd0eebefbb223d","6463f3688c2b6286f7e6f142","6463f6a32606c48c3af9a013","6463f89c01379949cfc3e74f","6463f9752afc6dcccec57a12","6463f9f0dbc909175a27b4bb","6463fa69b79137a9948ab38c","6463fb0fc619a45251a81cfb","6463fcb7cfa8f090e22704a9","6463fe830f2be99c40795f40","6463ff7ffff8e6de45c739df","646400379180fbf28af24b98","646400b45ca211fe0422a78c","64640152a17e89692d9b63c6","646402bfd8e5522c39fedec5","64640396525b19529562d016","64640661b66062ee2443445f","646406a2d256fbc576181989"],"idUsuario":"63fe53c56ac25d3aa7ac988b","idLeccion":"63f94104d79a4308398b1f07","__v":74,"completado":true},{"_id":"645c1708eb76fda410d2fbe0","tests":[],"idUsuario":"63fe53c56ac25d3aa7ac988b","idLeccion":"63f941efd79a4308398b1f09","completado":false,"__v":7}],"leccion":[{"_id":"63f94104d79a4308398b1f07","nombre":"Introduccion","texto":"adasdasdasdasd","contenido":[{"tipo":"titulo","texto":"Que es el sonido"},{"tipo":"texto","texto":"Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro. El sonido posee las siguientes cualidades físicas: • Tono:  Viene determinada por la frecuencia de la vibración sonora y se mide en Hercios (Hz). Nos permite reconocer si un sonido es agudo (alta frecuencia) o grave (baja frecuencia). • Volumen: Intensidad o amplitud de la vibración sonora. Se mide en Decibelios (dB) y clasifica los sonidos en fuertes o suaves. • Duración: Tiempo que dura la vibración sonora. Está asociada al ritmo musical. • Timbre: Aquel que nos permite distinguir dos sonidos de igual tono(frecuencia) e intensidad. "},{"tipo":"img","texto":"musica1.png"},{"tipo":"titulo","texto":"¿Qué es la música?"},{"tipo":"texto","texto":"Es el arte de combinar el sonido con el tiempo. Tiene tres elementos fundamentales:"},{"tipo":"titulo","texto":"Melodía"},{"tipo":"texto","texto":"Es una sucesión lineal de sonidos que es percibida como una sola unidad."},{"tipo":"titulo","texto":"Armonía"},{"tipo":"texto","texto":"Es la combinación de varias notas que suenan al mismo tiempo."},{"tipo":"titulo","texto":"Ritmo"},{"tipo":"texto","texto":"Es la distribución de sonidos en el tiempo."},{"tipo":"img","texto":"metronomo.png"},{"tipo":"titulo","texto":"¿Que es el lenguaje musical?"},{"tipo":"texto","texto":"Estudio de las cualidades o elementos de la música."}],"imagenprincipal":"musica.png"},{"_id":"64387a88b5af7c8a197a70cf","nombre":"Los instrumentos","imagenprincipal":"musica.jpg","contenido":[{"tipo":"img","texto":"orquesta.jpg"},{"tipo":"img","texto":""}],"__v":0},{"_id":"63f941fed79a4308398b1f0a","nombre":"Figuras musicales","texto":"dasdsdasdasdasdasdasda","contenido":[{"tipo":"titulo","texto":"Que es el sonido"},{"tipo":"texto","texto":"Es una onda que se propaga por el aire u otro medio, producida por la vibración de un cuerpo sonoro. El sonido posee las siguientes cualidades físicas: • Tono:  Viene determinada por la frecuencia de la vibración sonora y se mide en Hercios (Hz). Nos permite reconocer si un sonido es agudo (alta frecuencia) o grave (baja frecuencia). • Volumen: Intensidad o amplitud de la vibración sonora. Se mide en Decibelios (dB) y clasifica los sonidos en fuertes o suaves. • Duración: Tiempo que dura la vibración sonora. Está asociada al ritmo musical. • Timbre: Aquel que nos permite distinguir dos sonidos de igual tono(frecuencia) e intensidad. "},{"tipo":"img","texto":"musica1.png"},{"tipo":"titulo","texto":"¿Qué es la música?"},{"tipo":"texto","texto":"Es el arte de combinar el sonido con el tiempo. Tiene tres elementos fundamentales:"},{"tipo":"titulo","texto":"Melodía"},{"tipo":"texto","texto":"Es una sucesión lineal de sonidos que es percibida como una sola unidad."},{"tipo":"titulo","texto":"Armonía"},{"tipo":"texto","texto":"Es la combinación de varias notas que suenan al mismo tiempo."},{"tipo":"titulo","texto":"Ritmo"},{"tipo":"texto","texto":"Es la distribución de sonidos en el tiempo."},{"tipo":"img","texto":"metronomo.png"},{"tipo":"titulo","texto":"¿Qué es el lenguaje musical?"},{"tipo":"texto","texto":"Estudio de las cualidades o elementos de la música."}],"imagenprincipal":"leccion3.png"},{"_id":"63f941efd79a4308398b1f09","nombre":"pruebamodificada","texto":"dasdsdasdasdasdasdasda","contenido":[{"tipo":"titulo","texto":"ad"},{"tipo":"imagen","texto":"bd"},{"tipo":"texto","texto":"cd"},{"tipo":"titulo","texto":"dd"},{"tipo":"texto","texto":"ed"}],"imagenprincipal":"pruebamod.png"}],"mensaje":"Las lecciones se ha encontrado"}'));

    await tester.pumpWidget(
        MyApp()
    );

    await tester.pump();
    expect(find.text('MELOUDY'),findsWidgets);
    await tester.pump();

    await tester.enterText(find.byKey(Key('correo')), 'profe@correo');
    await tester.pump();

    await tester.enterText(find.byKey(Key('password')), 'profe');
    await tester.pump();

    await tester.tap(find.text('INICIAR SESIÓN'));

    await tester.pump();
    final  drawer = find.byTooltip('Open navigation menu');

    final ScaffoldState scafState = tester.firstState(find.byType(Scaffold));
    scafState.openDrawer();
    await tester.pumpAndSettle();


    await tester.tap(find.text('Dashboard'));
    await tester.pumpAndSettle();

    expect(
      find.text('Lecciones'),
      findsOneWidget,
    );

  });
}
